<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.care.teacher.mapper.TeacherMapper">
	<parameterMap type="java.util.HashMap" id="hashmap"></parameterMap>
	
 <resultMap type="com.care.teacher.dto.TeacherDTO" id="dto">
 	<result column="t_no" property="tno"/>
 	<result column="t_name" property="tname"/>
 	<result column="t_addr" property="taddr"/>
 	<result column="t_phone" property="tphone"/>
 	<result column="t_info" property="tinfo"/>
 	<result column="t_photo" property="tphoto"/>
 </resultMap>
 
 <select id="totalCount" parameterMap="hashmap" resultType="int">
		select count(*)
		from teacher_g4
		<where>
			<if test="searchtxt!=null and searchtxt!='' and !searchtxt.equals('')">
				and t_addr = #{searchtxt}
			</if>
		</where>
</select>
	
	<select id="getList" parameterMap="hashmap" resultMap="dto">
		
		select *
		from (
				select @rownum:=@rownum+1 as rnum, e.*
				from (
						select t_no
					  		 , t_name
					 		 , t_addr
					 		 , t_phone
					 		 , t_info
					 		 , t_photo
						from teacher_g4
						<where>
			<if test="searchtxt!=null and searchtxt!='' and !searchtxt.equals('')">
				and t_addr = #{searchtxt}
			</if>
		</where>
						
						<![CDATA[
							order by t_no
							)e, (select @rownum:=0) R
						]]>
				<where>
					<![CDATA[
						@rownum <= #{endrow}
					]]>
				</where>
			) B
			<where>
				<![CDATA[
					rnum >= #{startrow}
				]]>
			</where>
	</select>
 
 <!-- <select id="getList" resultMap="dto">
 	select t_no, t_name, t_addr, t_phone, t_info, t_photo
 	from teacher_g4
 </select> -->
 
 
</mapper>